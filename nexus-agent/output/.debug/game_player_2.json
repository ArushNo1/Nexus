{
  "lesson_plan": {
    "lessonPlan": {
      "title": "Introduction to Photosynthesis",
      "duration": "60 minutes",
      "gradeLevel": "Level: 5th Grade",
      "subject": "Science",
      "objectives": [
        "Students will be able to define photosynthesis.",
        "Students will identify the inputs (sunlight, water, carbon dioxide) and outputs (oxygen, glucose) of photosynthesis.",
        "Students will explain the importance of photosynthesis for life on Earth."
      ],
      "standards": [
        "NGSS 5-LS1-1: Support an argument that plants get the materials they need for growth chiefly from air and water."
      ],
      "materials": [
        "Could not extract materials"
      ],
      "content": {
        "introduction": "Could not extract introduction",
        "procedure": "Could not extract procedure",
        "closure": "Could not extract closure"
      }
    },
    "rubrics": {
      "title": "Extracted Rubric",
      "criteria": []
    },
    "assessments": [
      {
        "type": "Extracted Assessment",
        "title": "Assessment",
        "questions": [
          {
            "questionText": "- Formative: participation in Thumbs Up/Thumbs Down.\n- Summative: Plant diagram worksheet accuracy.\n- Quiz (to be given next class):\n  1. What gas do plants take in? (Carbon Dioxide)\n  2. What gas do plants release? (Oxygen)\n  3. What is the main source of energy for plants? (Sunlight)",
            "options": [],
            "correctAnswer": "",
            "points": 0
          }
        ]
      }
    ]
  },
  "game_type": "maze",
  "template_code": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Kaplay Maze Chase Template</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n        }\n\n        body {\n            background: #000;\n            overflow: hidden;\n        }\n\n        canvas {\n            display: block;\n        }\n    </style>\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/kaplay@3001.0.19/dist/kaplay.js\"></script>\n    <script>\n        // =============================================\n        //  MAZE / CHASE GAME TEMPLATE \u2014 Kaplay.js\n        //  Arrow keys / WASD to move\n        //  Collect all dots, avoid ghosts\n        //\n        //  ARCHITECTURE:\n        //    Three scenes: \"game\" (main), \"gameover\", \"win\".\n        //    Maze is defined as an ASCII string array in MAZES[]. Parsed char-by-char into Kaplay entities.\n        //    Tags used: \"wall\", \"dot\", \"power\", \"player\", \"ghost\".\n        //    Movement is continuous (not snapped to grid) but uses tile-based collision checks via canMove().\n        //    Ghost AI: 60% chase/flee bias, 40% random. Ghosts slow down + flee when player is powered up.\n        //    Win condition: collect ALL dots + power pellets (totalDots). Lose condition: lives reach 0.\n        // =============================================\n\n        // -- CONFIG: All tunable gameplay constants --\n        const C = {\n            tile: 32,              // tile size in pixels \u2014 maze dimensions derive from this\n            playerSpeed: 160,\n            ghostSpeed: 100,       // base speed; each ghost gets +15 per index (ghost 0=100, ghost 1=115, etc.)\n            ghostCount: 3,\n            powerUpTime: 6,        // seconds the power-up lasts\n            bg: [5, 5, 15],\n            wallCol: [30, 50, 140],\n            dotCol: [255, 220, 100],\n            powerCol: [255, 100, 200],\n            playerCol: [255, 230, 50],\n            ghostCols: [[255, 70, 70], [70, 220, 255], [255, 160, 50], [200, 70, 255]],\n            scaredCol: [\n... [truncated, 20221 chars total]",
  "game_design_doc": "GAME_TYPE: maze\n\nRATIONALE: The maze template is ideal for photosynthesis because it mirrors the process of a plant searching for and absorbing specific nutrients. The navigation-based gameplay simulates how a plant must \"gather\" its necessary components (sunlight, water, CO2) from its environment to survive and grow.\n\nADDON FEATURE: The Photosynthesis Formula Bar\nIn this mechanic, the player's primary goal is to fill a \"Formula Bar\" at the top of the screen by collecting three specific types of items in any order: a Water Drop, a Sunlight Spark, and a Carbon Dioxide Bubble. Once all three inputs are collected, the bar flashes, and the player releases an \"Oxygen Blast\" (functioning like a power pellet) that turns enemies into \"Glucose\" points for 10 seconds. This reinforces the specific inputs required for photosynthesis and the resulting outputs of oxygen and sugar.\n\nVISUAL THEME: The game is set inside the microscopic world of a \"Leaf Cell,\" with walls made of green plant cell structures. The player controls \"Sunny the Seedling,\" while the \"ghosts\" are re-themed as \"Pollution Clouds\" and \"Thirsty Aphids.\" The small dots usually found in a maze are replaced with \"Nutrient Pellets,\" and the four power-ups are represented by large glowing \"Chlorophyll\" molecules.",
  "design_feedback": "1. **Genre Fit (4/5)**: The maze format effectively simulates the \"gathering\" aspect of photosynthesis within a constrained, easy-to-understand environment.\n2. **Pedagogical Alignment (5/5)**: The Formula Bar mechanic perfectly reinforces the specific inputs and outputs of photosynthesis by making them the core requirement for game success.\n3. **Addon Feasibility (4/5)**: Implementing a collection-based UI bar and a temporary state change for enemies is a manageable extension of the standard maze template's logic.\n4. **Visual Theme Coherence (4/5)**: Re-theming the ghosts and pellets into biological components provides a consistent context that reinforces the microscopic leaf setting.\n5. **Fun Factor (5/5)**: Turning the \"Oxygen Blast\" into a strategic reward for completing the formula makes the science feel like a powerful gameplay advantage rather than a chore.\n\n**DECISION: PASS**",
  "design_approved": true,
  "implementation_plan": "This technical plan outlines the transformation of the Maze template into a photosynthesis-themed educational game where the player navigates a plant cell to gather life-sustaining inputs.\n\n### 1. Visual Reskin Plan\n\n**Theme: Microscopic Leaf Cell**\n\n| Existing Object | Reskinned To | Exact Changes |\n| :--- | :--- | :--- |\n| **Player (Bean)** | **Sunny the Seedling** | Change `sprite(\"bean\")` to a green `circle(12)` or custom seedling sprite. Change `C.playerCol` to `[100, 255, 100]` (Lime Green). |\n| **Ghosts (Rect)** | **Pollution Clouds / Aphids** | Use `circle(12)` with `C.ghostCols` adjusted to muddy greys `[100, 100, 100]` and deep insect reds `[150, 0, 0]`. Use `radius: 4` for a more organic look. |\n| **Walls (#)** | **Cell Wall Structure** | Change `C.wallCol` to `[20, 80, 20]` (Dark Forest Green). Change `outline` to `[40, 120, 40]`. |\n| **Dots (.)** | **Nutrient Pellets** | Change `C.dotCol` to `[200, 255, 200]` (Light Green). |\n| **Power Pellets (o)** | **Chlorophyll Molecules** | Change `C.powerCol` to `[0, 200, 0]` (Pure Green). Add a `rotate()` component with `onUpdate(() => pellet.angle += dt() * 100)`. |\n| **Background** | **Cytoplasm** | Change `C.bg` to `[10, 40, 10]` (Deep Green). |\n| **HUD Text** | **Photosynthesis Stats** | \"Score\" becomes \"Glucose Produced\". \"Lives\" becomes \"Hydration\". \"Power\" becomes \"OXYGEN BLAST!\". |\n\n---\n\n### 2. Addon Mechanic Implementation Plan: Photosynthesis Formula Bar\n\nThis mechanic requires the player to collect three specific items (Water, Sunlight, CO2) to trigger a power-up.\n\n#### Step 1: Define New State & Constants\nAdd these to the `scene(\"game\")` scope:\n- **State variables**: `const formula = { water: false, sun: false, co2: false };`\n- **Total collected count**: `let formulaCount = 0;`\n- **HUD reference**: A progress bar container at the top of the screen.\n\n#### Step 2: Spawn Formula Components\nIn the \"MAZE BUILDER\" loop, replace or add logic to spawn one-time items.\n- Modify the ASCII maze `MAZES` to include\n... [truncated, 4435 chars total]",
  "game_code": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Photosynthesis Maze: Sunny's Quest</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n        }\n\n        body {\n            background: #051a05; /* Deep Green Cytoplasm match */\n            overflow: hidden;\n            display: flex;\n            justify(content): center;\n            align-items: center;\n            height: 100vh;\n        }\n\n        canvas {\n            display: block;\n            box-shadow: 0 0 20px rgba(0, 255, 0, 0.2);\n        }\n    </style>\n</head>\n\n<body>\n    <!-- \n      GAME DESIGN: Photosynthesis Maze\n      \n      OBJECTIVE:\n      Help Sunny the Seedling grow by collecting Nutrient Pellets (dots) and synthesizing Glucose.\n      \n      MECHANICS:\n      1. Movement: Arrow keys / WASD to navigate the Cell structures.\n      2. Nutrients: Collect small green pellets for basic growth (score).\n      3. ADDON - Formula Bar: Collect Water (Blue), Sunlight (Yellow), and CO2 (Grey) to trigger Photosynthesis.\n         - Collecting all three triggers an \"Oxygen Blast\" (Power Mode).\n      4. Enemies: Avoid Pollution Clouds and Thirsty Aphids.\n         - During \"Oxygen Blast\", enemies turn into raw Glucose (edible).\n      \n      VISUALS:\n      - Player: Green Seedling\n      - Walls: Plant Cell Walls\n      - Power-up: Defined by the Formula Bar (Water + Sun + CO2)\n    -->\n\n    <script src=\"https://unpkg.com/kaplay@3001/dist/kaplay.js\"></script>\n    <script>\n        // =============================================\n        //  PHOTOSYNTHESIS MAZE GAME\n        // =============================================\n\n        // -- CONFIG --\n        const C = {\n            tile: 32,\n            topBar: 40,            // Height of the Formula Bar area\n            bottomBar: 40,         // Height of the Stats area\n            playerSpeed: 160,\n            ghostSpeed: 100,\n            ghostCount: 3,\n            powerUpTime: 10,       // Duration of Oxygen Blast\n     \n... [truncated, 28565 chars total]",
  "documentation": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <title>Photosynthesis Maze: Sunny's Quest</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n        }\n\n        body {\n            background: #051a05; /* Deep Green Cytoplasm match */\n            overflow: hidden;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 100vh;\n        }\n\n        canvas {\n            display: block;\n            box-shadow: 0 0 20px rgba(0, 255, 0, 0.2);\n        }\n    </style>\n</head>\n\n<body>\n    <!-- \n      GAME DESIGN: Photosynthesis Maze\n      \n      OBJECTIVE:\n      Help Sunny the Seedling grow by collecting Nutrient Pellets (dots) and synthesizing Glucose.\n      \n      MECHANICS:\n      1. Movement: Arrow keys / WASD to navigate the Cell structures.\n      2. Nutrients: Collect small green pellets for basic growth (score).\n      3. ADDON - Formula Bar: Collect Water (Blue), Sunlight (Yellow), and CO2 (Grey) to trigger Photosynthesis.\n         - Collecting all three triggers an \"Oxygen Blast\" (Power Mode).\n      4. Enemies: Avoid Pollution Clouds and Thirsty Aphids.\n         - During \"Oxygen Blast\", enemies turn into raw Glucose (edible).\n      \n      VISUALS:\n      - Player: Green Seedling\n      - Walls: Plant Cell Walls\n      - Power-up: Defined by the Formula Bar (Water + Sun + CO2)\n    -->\n\n    <script src=\"https://unpkg.com/kaplay@3001/dist/kaplay.js\"></script>\n    <script>\n        // =============================================\n        //  PHOTOSYNTHESIS MAZE GAME\n        // =============================================\n\n        // -- CONFIG --\n        const C = {\n            tile: 32,\n            topBar: 40,            // Height of the Formula Bar area\n            bottomBar: 40,         // Height of the Stats area\n            playerSpeed: 160,\n            ghostSpeed: 100,\n            ghostCount: 3,\n            powerUpTime: 10,       // Duration of Oxygen Blast\n      \n... [truncated, 28564 chars total]",
  "assets": {
    "sprites": [],
    "backgrounds": [],
    "sounds": []
  },
  "assets_embedded": true,
  "playtest_report": "Final verdict: SHIP",
  "ship_approved": true,
  "errors": [],
  "design_iteration": 1,
  "code_iteration": 1,
  "status": "done"
}