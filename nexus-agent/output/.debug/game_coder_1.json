{
  "lesson_plan": {
    "title": "Test Game",
    "objective": "Test",
    "content": "Test content"
  },
  "game_type": "platformer",
  "template_code": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Kaplay Platformer Template</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            background: #1a1a2e;\n            overflow: hidden;\n        }\n\n        canvas {\n            display: block;\n        }\n    </style>\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/kaplay@3001.0.19/dist/kaplay.js\"></script>\n    <script>\n        // ============================================================\n        //  KAPLAY.JS PLATFORMER TEMPLATE\n        //  A simple, customizable foundation for any 2D platformer.\n        //  Uses built-in Kaplay sprites & shapes \u2014 no external assets.\n        // ============================================================\n\n        // ----- 1. GAME CONFIG (tweak these!) -----\n        // This object holds all user-tweakable constants.\n        // Keeping them in one place makes it easy to balance gameplay without hunting through code.\n        const CONFIG = {\n            // Physics\n            gravity: 1600, // Gravity force applied to all bodies (pixels/sec^2)\n            jumpForce: 650,  // Initial velocity for jumps\n            moveSpeed: 300,  // Horizontal movement speed\n            maxFallSpeed: 800,  // Cap on downward velocity to prevent \"tunneling\" through floors\n\n            // Player\n            playerStartPos: { x: 50, y: 0 }, // Default spawn point if level data is missing '@'\n            playerHealth: 3,    // Starting HP\n\n            // Camera\n            cameraFollow: true, // Whether the camera tracks the player\n\n            // Visuals\n            // Using a designated palette keeps the game looking consistent.\n            bgColor: [18, 18, 42],\n            floorColor: [60, 180, 120],\n            platformColor: [80, 140, 200],\n            hazardColor: [220, 60, 80],\n            coinColor: \n... [truncated, 17132 chars total]",
  "game_design_doc": "GAME_TYPE: platformer\n\nRATIONALE: A platformer provides a clear, linear progression that mirrors the structure of a test or assessment. It allows for the segmentation of \"Test content\" into manageable levels, where players must demonstrate mastery of one concept before moving to the next.\n\nADDON FEATURE: The Knowledge Gate\nAt the end of each platforming segment, the player encounters two portals labeled with different answers related to the lesson content. To progress to the next level, the player must jump into the portal representing the correct answer; jumping into the incorrect portal triggers a \"reboot\" effect that sends the player back to the start of the current segment to try again.\n\nVISUAL THEME: The game is set in a \"Digital Testing Lab\" with a neon-grid aesthetic. The player character is a \"Data Probe\" (a small hovering robot), and the hazards are \"Corrupted Files\" (glitching red blocks) that must be avoided while navigating the circuitry-themed platforms.",
  "design_feedback": "1. **Genre Fit** \u2014 4/5: The platformer's linear structure provides a logical flow for moving through sequential assessment stages.\n2. **Pedagogical Alignment** \u2014 4/5: The Knowledge Gate creates a spatial interaction that directly tests the learner's understanding of the provided content.\n3. **Addon Feasibility** \u2014 5/5: Implementing portal triggers and basic scene resets is highly efficient and standard within the Kaplay.js framework.\n4. **Visual Theme Coherence** \u2014 5/5: The \"Digital Testing Lab\" aesthetic creates a clear and immersive metaphor for the \"Test Game\" lesson plan.\n5. **Fun Factor** \u2014 3/5: While the mechanic is engaging, resetting the entire segment on a wrong answer may be too frustrating for some learners.\n\n**DECISION: PASS**",
  "design_approved": true,
  "implementation_plan": "This technical plan outlines the transformation of the base platformer template into a **Digital Testing Lab** game featuring the **Knowledge Gate** mechanic.\n\n### 1. Visual Reskin Plan\n\nTo achieve the \"Digital Testing Lab\" aesthetic, we will replace the organic colors with high-contrast neon palettes and add geometric details.\n\n**A. Color Palette & Environment (CONFIG Object)**\n*   **Background**: Change `bgColor` to `[10, 10, 25]` (Deep Midnight).\n*   **Ground/Walls**: Change `floorColor` to `[0, 255, 255]` (Neon Cyan).\n*   **Platforms**: Change `platformColor` to `[255, 0, 255]` (Neon Magenta).\n*   **Hazards**: Change `hazardColor` to `[255, 50, 50]` (Glitch Red).\n*   **Coins**: Change `coinColor` to `[255, 255, 0]` (Data Yellow).\n\n**B. Game Objects**\n*   **Player (Data Probe)**:\n    *   Instead of just `sprite(\"bean\")`, add a `rect` child or `outline(2, rgb(255, 255, 255))` to give it a robotic glow.\n    *   Scale it down to `0.8` for a \"compact drone\" look.\n*   **Hazards (Corrupted Files)**:\n    *   Replace `polygon` spikes with `rect(TILE, TILE)` blocks.\n    *   Add a `shake()` or `opacity()` flicker in an `onUpdate` loop to simulate \"glitching.\"\n*   **Coins (Data Bits)**:\n    *   Change `circle(10)` to `rect(12, 12, { radius: 2 })` and rotate by 45 degrees (diamond shape).\n*   **HUD**:\n    *   Rename \"Coins\" to \"Data Bits\".\n    *   Use a monospace font if available or keep default with `size: 16` for a terminal feel.\n\n---\n\n### 2. Addon Mechanic Implementation: The Knowledge Gate\n\nThe Knowledge Gate consists of two portals at the end of each level. One represents the correct answer and the other represents the incorrect one.\n\n#### A. Data Structure\nAdd a constant `QUESTIONS` array before the `LEVELS` array to store lesson content.\n```javascript\nconst QUESTIONS = [\n    { \n        q: \"Which tag groups objects?\", \n        a: \"Tags\", // Correct\n        b: \"Names\", // Incorrect\n        correct: \"a\" \n    },\n    // ... one for each level\n];\n```\n\n#### B. Level Map Upd\n... [truncated, 4318 chars total]",
  "game_code": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Digital Testing Lab: Knowledge Gate</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            background: #0a0a19;\n            overflow: hidden;\n            font-family: 'Courier New', Courier, monospace;\n        }\n\n        canvas {\n            display: block;\n        }\n    </style>\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/kaplay@3001/dist/kaplay.js\"></script>\n    <script>\n        /**\n         * EDUCATIONAL OBJECTIVES\n         * ----------------------\n         * Topic: Programming Basics (Variables & Logic)\n         * Mechanic: The \"Knowledge Gate\" requires players to answer a question to progress.\n         *           - Correct Answer: Level Complete\n         *           - Incorrect Answer: System Reboot (Retry Section)\n         */\n\n        // ----- 1. GAME CONFIG -----\n        const CONFIG = {\n            // Physics\n            gravity: 1600,\n            jumpForce: 650,\n            moveSpeed: 300,\n            maxFallSpeed: 800,\n\n            // Player\n            playerStartPos: { x: 50, y: 0 },\n            playerHealth: 3,\n\n            // Visuals - Digital/Neon Theme\n            bgColor: [10, 10, 25],      // Deep Midnight\n            floorColor: [0, 255, 255],  // Neon Cyan\n            platformColor: [255, 0, 255], // Neon Magenta\n            hazardColor: [255, 50, 50],   // Glitch Red\n            coinColor: [255, 255, 0],     // Data Yellow\n            gateColor: [100, 255, 100],   // Success Green (base tint)\n        };\n\n        // ----- 2. LESSON CONTENT (The Knowledge Gates) -----\n        const QUESTIONS = [\n            {\n                q: \"What stores a value?\",\n                a: \"Variable\",\n                b: \"Loop\",\n                correct: \"a\"\n            },\n            {\n                q: \"Which i\n... [truncated, 17375 chars total]",
  "documentation": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Digital Testing Lab: Knowledge Gate</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            background: #0a0a19;\n            overflow: hidden;\n            font-family: 'Courier New', Courier, monospace;\n        }\n\n        canvas {\n            display: block;\n        }\n    </style>\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/kaplay@3001/dist/kaplay.js\"></script>\n    <script>\n        /**\n         * EDUCATIONAL OBJECTIVES\n         * ----------------------\n         * Topic: Programming Basics (Variables & Logic)\n         * Mechanic: The \"Knowledge Gate\" requires players to answer a question to progress.\n         *           - Correct Answer: Level Complete\n         *           - Incorrect Answer: System Reboot (Retry Section)\n         */\n\n        // ----- 1. GAME CONFIG -----\n        const CONFIG = {\n            // Physics\n            gravity: 1600,\n            jumpForce: 650,\n            moveSpeed: 300,\n            maxFallSpeed: 800,\n\n            // Player\n            playerStartPos: { x: 50, y: 0 },\n            playerHealth: 3,\n\n            // Visuals - Digital/Neon Theme\n            bgColor: [10, 10, 25],      // Deep Midnight\n            floorColor: [0, 255, 255],  // Neon Cyan\n            platformColor: [255, 0, 255], // Neon Magenta\n            hazardColor: [255, 50, 50],   // Glitch Red\n            coinColor: [255, 255, 0],     // Data Yellow\n            gateColor: [100, 255, 100],   // Success Green (base tint)\n        };\n\n        // ----- 2. LESSON CONTENT (The Knowledge Gates) -----\n        const QUESTIONS = [\n            {\n                q: \"What stores a value?\",\n                a: \"Variable\",\n                b: \"Loop\",\n                correct: \"a\"\n            },\n            {\n                q: \"Which i\n... [truncated, 17375 chars total]",
  "playtest_report": "",
  "ship_approved": false,
  "errors": [],
  "design_iteration": 1,
  "code_iteration": 0,
  "status": "playtesting"
}