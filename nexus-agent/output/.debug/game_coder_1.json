{
  "lesson_plan": {
    "lessonPlan": {
      "title": "Introduction to the American Civil War",
      "duration": "60 minutes",
      "gradeLevel": "8th Grade",
      "subject": "Social Studies/History",
      "objectives": [
        "Students will be able to identify the main causes of the Civil War (slavery, states' rights, economic differences).",
        "Students will explain the differences between the Union and Confederate states.",
        "Students will describe key events and outcomes of the Civil War.",
        "Students will understand the significance of the Civil War in American history."
      ],
      "standards": [
        "CCSS.ELA-LITERACY.RH.6-8.2: Determine the central ideas or information of a primary or secondary source.",
        "NCSS Theme 2: Time, Continuity, and Change - Understanding causes and effects of historical events."
      ],
      "materials": [
        "Could not extract materials"
      ],
      "content": {
        "introduction": "Could not extract introduction",
        "procedure": "Could not extract procedure",
        "closure": "Could not extract closure"
      }
    },
    "rubric": {
      "title": "Extracted Rubric",
      "criteria": []
    },
    "assessments": [
      {
        "type": "Extracted Assessment",
        "title": "Assessment",
        "questions": [
          {
            "questionText": "- Formative: participation in class discussion about causes of the war.\n- Summative: Civil War timeline and map worksheet accuracy.\n- Quiz (to be given next class):\n  1. What were the two sides in the Civil War? (Union/North and Confederacy/South)\n  2. What was the main issue that divided the North and South? (Slavery)\n  3. Who was the President of the United States during the Civil War? (Abraham Lincoln)",
            "options": [],
            "correctAnswer": "",
            "points": 0
          }
        ]
      }
    ]
  },
  "game_id": "292f0e23-5b37-4cd2-8421-ef4ebbc107dc",
  "game_type": "platformer",
  "template_code": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Kaplay Platformer Template</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            background: #1a1a2e;\n            overflow: hidden;\n        }\n\n        canvas {\n            display: block;\n        }\n    </style>\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/kaplay@3001.0.19/dist/kaplay.js\"></script>\n    <script>\n        // ============================================================\n        //  KAPLAY.JS PLATFORMER TEMPLATE\n        //  A simple, customizable foundation for any 2D platformer.\n        //  Uses built-in Kaplay sprites & shapes \u2014 no external assets.\n        // ============================================================\n\n        // ----- 1. GAME CONFIG (tweak these!) -----\n        // This object holds all user-tweakable constants.\n        // Keeping them in one place makes it easy to balance gameplay without hunting through code.\n        const CONFIG = {\n            // Physics\n            gravity: 1600, // Gravity force applied to all bodies (pixels/sec^2)\n            jumpForce: 650,  // Initial velocity for jumps\n            moveSpeed: 300,  // Horizontal movement speed\n            maxFallSpeed: 800,  // Cap on downward velocity to prevent \"tunneling\" through floors\n\n            // Player\n            playerStartPos: { x: 50, y: 0 }, // Default spawn point if level data is missing '@'\n            playerHealth: 3,    // Starting HP\n\n            // Camera\n            cameraFollow: true, // Whether the camera tracks the player\n\n            // Visuals\n            // Using a designated palette keeps the game looking consistent.\n            bgColor: [18, 18, 42],\n            floorColor: [60, 180, 120],\n            platformColor: [80, 140, 200],\n            hazardColor: [220, 60, 80],\n            coinColor: \n... [truncated, 17132 chars total]",
  "game_design_doc": "GAME_TYPE: platformer\n\nRATIONALE: The American Civil War is best taught as a chronological progression of events and shifting tensions. A platformer allows the player to move through \"levels\" of history, starting with the causes in the early 1800s and progressing toward the war's conclusion, physically representing the passage of time and the obstacles faced by the nation.\n\nADDON FEATURE: The Legislative Dispatch\nThroughout each level, the player must collect \"Fact Scrolls\" scattered in hard-to-reach places. At the end of the level, the player reaches a \"Telegraph Station\" (the level exit), which only opens once the player correctly categorizes their collected scrolls into two bins: \"Union/North\" and \"Confederacy/South.\" This reinforces the lesson's objective of distinguishing between the two sides and their respective economic and political characteristics before they can proceed to the next historical era.\n\nVISUAL THEME: The game is set in the mid-19th century United States, with the background changing from the industrial factories of the North to the agrarian plantations of the South. The player character is a \"History Scout\" in a Union-style blue cap, and the hazards are \"Conflict Clouds\" and \"Policy Spikes,\" representing the growing political tensions of the 1860s.",
  "design_feedback": "### Evaluation Results\n\n1. **Genre Fit (5/5)**: Using levels to represent historical eras provides a clear chronological structure that mirrors the progression of the war from causes to conclusion.\n2. **Pedagogical Alignment (5/5)**: The sorting mechanic at the Telegraph Station directly tests the student's ability to distinguish between Union and Confederate characteristics, fulfilling a core lesson objective.\n3. **Addon Feasibility (4/5)**: Implementing a sorting UI and conditional exit logic is well within the capabilities of a Kaplay.js platformer template without requiring a core engine rewrite.\n4. **Visual Theme Coherence (4/5)**: The visual shift between industrial and agrarian environments effectively reinforces the economic causes of the war mentioned in the lesson plan.\n5. **Fun Factor (4/5)**: The \"Legislative Dispatch\" integrates the educational content into the win-condition of the game, making the learning feel like a rewarding puzzle rather than a forced interruption.\n\n**Average Score: 4.4**\n\n**DECISION: PASS**",
  "design_approved": true,
  "implementation_plan": "This technical plan outlines the visual transformation of the Platformer template into a Civil War history game and the implementation of the \"Legislative Dispatch\" sorting mechanic.\n\n### 1. Visual Reskin Plan\n\nEvery visual element will be updated to reflect the 1860s historical context.\n\n| Object | Template Default | New Civil War Theme | Visual Details |\n| :--- | :--- | :--- | :--- |\n| **Player** | `sprite(\"bean\")` | **History Scout** | Blue rectangle (Union Cap) `[0, 50, 150]` with a smaller tan square `[210, 180, 140]` for the face. |\n| **Ground (=)** | `CONFIG.floorColor` | **Industrial/Agrarian Soil** | **Lvl 1:** Dark Brick `[130, 50, 50]`. **Lvl 2:** Plantation Soil `[100, 70, 40]`. |\n| **Platforms (-)** | `CONFIG.platformColor` | **Wooden Scaffolding** | Light Brown `[180, 140, 100]` with `outline(2)` for a plank look. |\n| **Coins ($)** | `circle(10)` (Yellow) | **Fact Scrolls** | White `[255, 255, 240]` rectangles `rect(20, 10)` with a small tan \"ribbon\" detail. |\n| **Hazards (^)** | `polygon(...)` (Red) | **Policy Spikes** | Dark Metallic Grey `[60, 60, 60]` representing sharp political divides. |\n| **Portal (>)** | `rect(...)` (Purple) | **Telegraph Station** | Iron-grey metallic tower `[80, 80, 90]` with a pulsing yellow light `opacity(0.8)`. |\n| **Background** | `CONFIG.bgColor` | **War Horizon** | **Lvl 1 (North):** Smoke Grey `[100, 105, 110]`. **Lvl 2 (South):** Sunset Orange/Dusty Yellow `[200, 150, 100]`. |\n| **HUD Labels** | \"Coins\", \"HP\" | **\"Unity\", \"Facts\"** | \"Unity\" (HP) in Blue; \"Facts Collected\" in Gold. |\n\n---\n\n### 2. Addon Mechanic Implementation Plan: The Legislative Dispatch\n\nThe \"Legislative Dispatch\" requires players to collect scrolls containing historical facts and sort them correctly before the Telegraph Station (exit) activates.\n\n#### A. Data Structure\nDefine the facts associated with each level at the top of the script:\n```javascript\nconst FACT_DATA = [\n    { level: 0, facts: [\n        { text: \"Larger population and more factori\n... [truncated, 4972 chars total]",
  "game_code": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Civil War: The Legislative Dispatch</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            background: #1a1a2e;\n            overflow: hidden;\n            font-family: 'Courier New', Courier, monospace;\n        }\n\n        canvas {\n            display: block;\n        }\n    </style>\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/kaplay@3001/dist/kaplay.js\"></script>\n    <script>\n        // ============================================================\n        //  CIVIL WAR: THE LEGISLATIVE DISPATCH\n        //  A historical platformer about the causes of the US Civil War.\n        //  Mechanics: Platforming + Fact Sorting Minigame\n        // ============================================================\n\n        // ----- 1. GAME CONFIG -----\n        const CONFIG = {\n            // Physics\n            gravity: 1600,\n            jumpForce: 650,\n            moveSpeed: 300,\n            maxFallSpeed: 800,\n\n            // Player Stats\n            playerStartPos: { x: 50, y: 0 },\n            playerHealth: 3,\n\n            // Visuals - Civil War Theme\n            colors: {\n                unionBlue: [0, 50, 150],\n                confedGray: [130, 130, 140],\n                skinTan: [210, 180, 140],\n                \n                // Level 1: North (Industrial)\n                northSky: [100, 105, 110], // Smoggy/Overcast\n                northGround: [130, 50, 50], // Brick\n                \n                // Level 2: South (Agrarian)\n                southSky: [200, 150, 100], // Dusty/Sunset\n                southGround: [100, 70, 40], // Soil\n\n                wood: [180, 140, 100],\n                scrollWhite: [245, 245, 235],\n                scrollRibbon: [218, 165, 32],\n                hazardIron: [60, 60, 60],\n                po\n... [truncated, 25642 chars total]",
  "documentation": "<!DOCTYPE html>\n<html lang=\"en\">\n\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Civil War: The Legislative Dispatch</title>\n    <style>\n        * {\n            margin: 0;\n            padding: 0;\n            box-sizing: border-box;\n        }\n\n        body {\n            background: #1a1a2e;\n            overflow: hidden;\n            font-family: 'Courier New', Courier, monospace;\n        }\n\n        canvas {\n            display: block;\n        }\n    </style>\n</head>\n\n<body>\n    <script src=\"https://unpkg.com/kaplay@3001/dist/kaplay.js\"></script>\n    <script>\n        // ============================================================\n        //  CIVIL WAR: THE LEGISLATIVE DISPATCH\n        //  A historical platformer about the causes of the US Civil War.\n        //  Mechanics: Platforming + Fact Sorting Minigame\n        // ============================================================\n\n        // ----- 1. GAME CONFIG -----\n        const CONFIG = {\n            // Physics\n            gravity: 1600,\n            jumpForce: 650,\n            moveSpeed: 300,\n            maxFallSpeed: 800,\n\n            // Player Stats\n            playerStartPos: { x: 50, y: 0 },\n            playerHealth: 3,\n\n            // Visuals - Civil War Theme\n            colors: {\n                unionBlue: [0, 50, 150],\n                confedGray: [130, 130, 140],\n                skinTan: [210, 180, 140],\n                \n                // Level 1: North (Industrial)\n                northSky: [100, 105, 110], // Smoggy/Overcast\n                northGround: [130, 50, 50], // Brick\n                \n                // Level 2: South (Agrarian)\n                southSky: [200, 150, 100], // Dusty/Sunset\n                southGround: [100, 70, 40], // Soil\n\n                wood: [180, 140, 100],\n                scrollWhite: [245, 245, 235],\n                scrollRibbon: [218, 165, 32],\n                hazardIron: [60, 60, 60],\n                po\n... [truncated, 25642 chars total]",
  "playtest_report": "",
  "ship_approved": false,
  "errors": [],
  "design_iteration": 1,
  "code_iteration": 0,
  "status": "playtesting"
}